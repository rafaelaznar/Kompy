<template id="my-button">
  <style>
    button {
      background: coral;
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
  <button>Click!</button>
</template>

<script type="module">
  class MyButton extends HTMLElement {
    constructor() {
      super();
      const tpl = document.getElementById('my-button').content.cloneNode(true);
      this.attachShadow({ mode: 'open' }).appendChild(tpl);
    }
    connectedCallback() {
      this.shadowRoot.querySelector('button').onclick = () => {
        // keep the internal behavior
        alert('Hola desde MyButton!');
        // also dispatch a composed, bubbling custom event so the page
        // can listen on <my-button> for `my-button-click` events
        const detail = {
          timestamp: Date.now(),
          value: this.getAttribute('value') || null
        };
        this.dispatchEvent(new CustomEvent('my-button-click', { detail, bubbles: true, composed: true }));
      };
    }
  }
  customElements.define('my-button', MyButton);
</script>